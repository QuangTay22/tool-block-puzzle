<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Block Blast ‚Äî UI + Solver</title>
  <style>
    :root{
      --bg:#f6f7fb;--card:#fff;--ink:#111;--muted:#6b7280;--primary:#6d28d9;--primary-2:#7c3aed;--grid:#e5e7eb;--warn:#ef4444
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(135deg,#eef2ff,#fdf2f8);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:var(--ink)}
    .wrap{max-width:1100px;margin:24px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 12px;letter-spacing:.2px}
    .sub{color:var(--muted);margin-bottom:24px}
    .row{display:grid;gap:16px}
    .cols-2{grid-template-columns:460px 1fr}
    .card{background:var(--card);border-radius:16px;box-shadow:0 6px 22px rgba(0,0,0,.06);padding:18px}
    .section-title{font-weight:700;margin-bottom:10px}
    .grid8{display:grid;grid-template-columns:repeat(8,1fr);gap:4px;width:380px;height:380px;margin:8px auto}
    .grid5{display:grid;grid-template-columns:repeat(5,1fr);gap:2px;width:148px;height:148px}
    .cell{border-radius:4px;background:#e9edfd;border:1px solid var(--grid);cursor:pointer;transition:.3s}
    .cell.on{box-shadow:inset 2px 2px 0 rgba(255,255,255,.5), inset -2px -2px 0 rgba(14,34,102,.08)}

    /* M√†u ri√™ng cho t·ª´ng kh·ªëi (khu v·∫Ω 5√ó5) */
    #fig1 .cell.on {background:#ff7620;} /* cam */
    #fig2 .cell.on {background:#22c55e;} /* xanh l√° */
    #fig3 .cell.on {background:#ec4899;} /* h·ªìng */

    /* M√†u tr√™n b√†n ch√≠nh */
    .piece1{background:#ff7620 !important}
    .piece2{background:#22c55e !important}
    .piece3{background:#ec4899 !important}
    .cleared{background:#facc15 !important; opacity:1;}
    .fadeout{opacity:0; transition:opacity 0.8s ease-out;}

    .bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    button{border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn{background:#6d28d9;color:#fff}
    .btn:hover{background:#7c3aed}
    .btn-ghost{background:#fff;border:1px solid #d1d5db;color:#374151}
    .btn-danger{background:var(--warn);color:#fff}
    .mini{font-size:12px;color:var(--muted)}
    .figs{display:flex;gap:16px;justify-content:center}
    .fig{display:flex;flex-direction:column;align-items:center;gap:8px}
    label{font-size:14px;color:#374151}
    .tool{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0}
    .out{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
    .thumb{padding:12px;border-radius:12px;border:1px solid #e5e7eb}
    .thumb h4{margin:0 0 6px;font-size:14px}
    .legend{display:flex;gap:10px;justify-content:center;margin-top:6px;flex-wrap:wrap}
    .dot{width:12px;height:12px;border-radius:3px;display:inline-block;vertical-align:middle;margin-right:6px}
    .d-empty{background:#e9edfd;border:1px solid #dbe1ff}
    .d-grid{background:#7180ff}
    .d-piece1{background:#ff7620}
    .d-piece2{background:#22c55e}
    .d-piece3{background:#ec4899}
    .status{margin:8px 0 0;color:#374151}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;background:#f3f4f6;padding:2px 6px;border-radius:6px;border:1px solid #e5e7eb}
    .switch{display:inline-flex;gap:8px;align-items:center}
    input[type="checkbox"]{width:16px;height:16px}
    .small{font-size:12px;color:#6b7280}
    .foot{margin-top:8px;color:#6b7280;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Block Blast ‚Äî UI + Solver</h1>
    <p class="sub">Solver ƒë·∫∑t tr·ª±c ti·∫øp l√™n b√†n ch√≠nh. Khi h√†ng/c·ªôt ƒë·∫ßy s·∫Ω chuy·ªÉn sang m√†u v√†ng üü® r·ªìi bi·∫øn m·∫•t ·ªü l∆∞·ª£t ti·∫øp theo.</p>

    <div class="row cols-2">
      <div class="card">
        <div class="section-title">B√†n 8√ó8</div>
        <div id="grid8" class="grid8"></div>
        <div class="bar">
          <button class="btn" id="solveBtn">Solve</button>
          <button class="btn-ghost" id="stepBtn">Step-by-step</button>
          <button class="btn-ghost" id="clearGrid">Clear grid</button>
          <button class="btn-danger" id="resetAll">Reset t·∫•t c·∫£</button>
        </div>

        <!-- üéØ N√∫t ƒë·∫∑t kh·ªëi tr·ª±c ti·∫øp l√™n b√†n ch√≠nh -->
        <div class="bar" style="margin-top:8px; flex-wrap:wrap">
          <span>ƒê·∫∑t kh·ªëi l√™n b√†n 8√ó8:</span>
          <button class="btn-ghost" data-mainfill="DOT1">1 dot</button>

          <button class="btn-ghost" data-mainfill="L3_UP">L3 ‚Üë</button>
          <button class="btn-ghost" data-mainfill="L3_DOWN">L3 ‚Üì</button>
          <button class="btn-ghost" data-mainfill="L3_LEFT">L3 ‚Üê</button>
          <button class="btn-ghost" data-mainfill="L3_RIGHT">L3 ‚Üí</button>

          <button class="btn-ghost" data-mainfill="Z_UP">Z ‚Üë</button>
          <button class="btn-ghost" data-mainfill="Z_DOWN">Z ‚Üì</button>
          <button class="btn-ghost" data-mainfill="Z_LEFT">Z ‚Üê</button>
          <button class="btn-ghost" data-mainfill="Z_RIGHT">Z ‚Üí</button>

          <button class="btn-ghost" data-mainfill="DOT4_H">4 dot ‚Äî ngang</button>
          <button class="btn-ghost" data-mainfill="DOT4_V">4 dot ‚Äî d·ªçc</button>

          <button class="btn-ghost" data-mainfill="DOT5_H">5 dot ‚Äî ngang</button>
          <button class="btn-ghost" data-mainfill="DOT5_V">5 dot ‚Äî d·ªçc</button>

          <button class="btn-ghost" data-mainfill="BLOCK3x3">3√ó3</button>
        </div>

        <div class="legend">
          <span><span class="dot d-grid"></span>√î ƒë√£ c√≥ g·∫°ch</span>
          <span><span class="dot d-empty"></span>√î tr·ªëng</span>
          <span><span class="dot d-piece1"></span>Figure 1</span>
          <span><span class="dot d-piece2"></span>Figure 2</span>
          <span><span class="dot d-piece3"></span>Figure 3</span>
          <span><span class="dot" style="background:#facc15"></span>Cleared (v√†ng)</span>
        </div>
      </div>

      <!-- ph·∫ßn kh·ªëi 5√ó5 gi·ªØ nguy√™n -->
      ...
    </div>
  </div>

  <script>
    // build grids (code c≈© gi·ªØ nguy√™n)...

    // üéØ Presets m·ªü r·ªông
    const presets={
      I:[[0,0],[1,0],[2,0],[3,0]],
      L:[[0,0],[0,1],[0,2],[1,2]],
      T:[[0,0],[1,0],[2,0],[1,1]],
      O:[[0,0],[1,0],[0,1],[1,1]],
      S:[[1,0],[2,0],[0,1],[1,1]],
      Z:[[0,0],[1,0],[1,1],[2,1]],
      DOT3:[[0,0],[1,0],[2,0]],
      DOT2:[[0,0],[1,0]],
      CLEAR:[],

      // th√™m m·ªõi üëá
      DOT1:[[0,0]],
      L3_UP:[[0,0],[0,1],[0,2],[1,0]],
      L3_DOWN:[[0,0],[1,0],[1,1],[1,2]],
      L3_LEFT:[[0,0],[1,0],[2,0],[0,1]],
      L3_RIGHT:[[0,0],[0,1],[1,1],[2,1]],
      Z_UP:[[0,0],[1,0],[1,1],[2,1]],
      Z_DOWN:[[1,0],[2,0],[0,1],[1,1]],
      Z_LEFT:[[0,0],[0,1],[1,1],[1,2]],
      Z_RIGHT:[[1,0],[1,1],[0,1],[0,2]],
      DOT4_H:[[0,0],[1,0],[2,0],[3,0]],
      DOT4_V:[[0,0],[0,1],[0,2],[0,3]],
      DOT5_H:[[0,0],[1,0],[2,0],[3,0],[4,0]],
      DOT5_V:[[0,0],[0,1],[0,2],[0,3],[0,4]],
      BLOCK3x3:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]]
    }

    // üéØ Apply preset cho b√†n ch√≠nh
    let currentMainPreset=null
    document.querySelectorAll('[data-mainfill]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        currentMainPreset=btn.dataset.mainfill
      })
    })
    document.getElementById('grid8').addEventListener('click',ev=>{
      const el=ev.target
      if(!el.classList.contains('cell')) return
      if(currentMainPreset){
        const idx=[...grid8].indexOf(el)
        const r=Math.floor(idx/8), c=idx%8
        presets[currentMainPreset].forEach(([x,y])=>{
          const rr=r+y, cc=c+x
          if(rr>=0 && rr<8 && cc>=0 && cc<8){
            grid8[rr*8+cc].classList.add('on')
          }
        })
      } else {
        el.classList.toggle('on')
      }
    })
  </script>
</body>
</html>
